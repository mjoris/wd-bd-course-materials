<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Webscripting 2 &mdash; Serverside Webscripting</title>

		<meta name="description" content="Webscripting2 &mdash; Serverside Webscripting &mdash; 04.laravel.intro">
		<meta name="author" content="Joris Maervoet - ikdoeict.be">

		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css" media="screen">
		<link rel="stylesheet" href="css/print.css" media="print">

		<link rel="stylesheet" href="lib/zenburn.css">
		<style>
			html, body {
				background: #34afbd;
				background: -moz-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#34afbd), color-stop(100%,#1c1e20));
				background: -webkit-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -o-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -ms-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				letter-spacing: 0em;
			}

			#reveal nav {
				opacity: 0.3;
				letter-spacing: -0.02em;
			}
		</style>
	</head>

	<body>

		<div id="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">


				<!-- Title -->
				<section>
					<section>
						<h3 class="inverted">Serverside Webscripting 2 <small>[JLW506]</small></h3>
						<h1>04.laravel intro</h1>

						<footer>
							<em>Course materials: <a href="mailto:joris.maervoet@odisee.be">Joris Maervoet</a></em>
						</footer>
						<script>
							// Delicously hacky. Look away.
							if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) )
							document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
						</script>
					</section>
				</section>


				<!-- Getting started with Laravel -->
				<section>
					<section>
						<h2>Getting started with Laravel</h2>
						<p><img src="assets/04b/laravel-logo-white.png" alt="" title="" width="547" /></p>
					</section>

					<section>
						<h2>Laravel</h2>
						<ul>
							<li class="fragment">Full-featured PHP Framework for the development of web applications 
								<ul>
									<li class="fragment">Model–View–Controller (MVC) pattern</li>
									<li class="fragment">
										A <strong>huge</strong> number of built-in features
										<ul>
											<li class="fragment">Routing</li>
											<li class="fragment">Views and Template engine</li>
											<li class="fragment">DB-related: ORM, Query Builder, Migrations, &hellip;</li>
											<li class="fragment">Simple authentication</li>
											<li class="fragment">Queues, Logging, &hellip;</li>
										</ul>
									</li>
									<li class="fragment">Emphasis on <em>beautiful code</em> (through syntactic sugar)</li>
									<li class="fragment">Artisan CLI
										<ul>
											<li class="fragment">Example usages: generate classes, clear cache</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</section>

					<section>
						<h2>Installation (1)</h2>
						<ul>
							<li class="fragment">
								Installable via Composer
								<pre class="bigger"><code class="language-bash dontrun" style="max-height: 380px; overflow: scroll;">$ composer create-project --prefer-dist laravel/laravel projectname ~5.0</code></pre>
								<ul>
									<li class="fragment">Version is optional (default: latest)</li>
									<li class="fragment"><a href="https://getcomposer.org/doc/03-cli.md#create-project">Composer docs</a>: <code>composer create-project</code> is the equivalent of doing a <code>git clone</code> followed by a <code>composer install</code> of the vendors.</li>
									<li class="fragment">In other words:
										<ul>
											<li class="fragment">It downloads the whole project structure including folders, PHP-files, an <code>.htaccess</code> file and a rather complex <code>composer.json</code> file. </li>
											<li class="fragment">Next, all dependencies are installed in the <code>vendor</code> folder and <code>composer.lock</code> is generated.</li>
											<li class="fragment">So: <strong>you start with an already <em>working</em> project</strong></li>
										</ul>
									</li>
								</ul> 
							</li>

						</ul>
					</section>
					
					<section>
						<h2>Installation (2)</h2>
						<ul>
							<li class="fragment">
								If you prefer <em>beautiful</em> commands such as <code>laravel new projectname</code>, you need to check <a href="https://laravel.com/docs/5.2#installing-laravel">Laravel Installer</a> (install via Composer)
							</li>
						</ul>
					</section>
					
					<section>
						<h2><small>(Already installed)</small> <a href="https://laravel.com/docs/master/structure">project structure</a> (1)</h2>
						<ul>
							<li class="fragment">
								<code>public/</code> &mdash; Public files
								<ul>
									<li class="fragment"><code class="special">index.php</code> &mdash; Request Entry Point</li>
									<li class="fragment">add your assets: <code>css/</code> <span style="font-size: 70%">&amp;</span> <code>js/</code> <span style="font-size: 70%">&amp;</span> <code>img/</code> <span style="font-size: 70%">&amp;</span> <code>files/</code> <span style="font-size: 70%">&amp;</span> &hellip;</li>
									<li class="fragment"><code>.htaccess</code> (<a href="02.url.design.html#/2">or the like</a>)</li>
								</ul>
							</li>
							<li class="fragment">
								<code>app/</code> &mdash; Core code of your application &mdash; 8 subfolders e.g.
								<ul>
									<li class="fragment"><code>Console/</code> &mdash; Your Artisan commands</li>
									<li class="fragment"><code>Http/</code> &mdash; Your routes, controllers, middleware, and requests.</li>
								</ul>
							</li>
							<li class="fragment">
								<code>bootstrap/</code> &mdash; Bootstrap and autoloading
							</li>
							<li class="fragment">
								<code>config/</code> &mdash; Configuration files
							</li>
							<li class="fragment">
								<code>database/</code> &mdash; Database migration and seeds
							</li>
							
						</ul>
						<footer class="fragment"><em>Note: Make sure only the contents of <code>public/</code> are accessible over HTTP!</em></footer>
					</section>
					
					<section>
						<h2><small>(Already installed)</small> <a href="https://laravel.com/docs/master/structure">project structure</a> (2)</h2>
						<ul>
							<li class="fragment">
								<code>resources/</code> &mdash; Raw assets (to be compiled) such as templates and localization files
							</li>
							<li class="fragment">
								<code>storage/</code> &mdash; All kinds of generated files: logs, transpiled templates, caches, &hellip;
							</li>
							<li class="fragment">
								<code>tests/</code> &mdash; Automated tests (PHPUnit)
							</li>
							<li class="fragment">
								<code>vendor/</code> &mdash; <em>(as created by Composer)</em>
							</li>
							<li class="fragment">
								<code>.env</code> &mdash; Environment configuration: see next slides
							</li>
							<li class="fragment">
								<code>.gitignore</code> &mdash; <em>(already configured)</em>
							</li>
							<li class="fragment">
								<code>artisan</code> &mdash; supports Artisan CLI
							</li>
							<li class="fragment">
								<code>composer.json</code> <span style="font-size: 70%">&amp;</span> <code>composer.lock</code>
							</li>
						</ul>
					</section>
					
					<section>
						<h2>Artisan Console</h2>
						<ul>
							<li class="fragment">
								Functions: clear caches, generate classes, &hellip;
							</li>
							<li class="fragment">
								Available commands and help
								<pre class="bigger"><code class="language-bash dontrun" style="max-height: 380px; overflow: scroll;">$ php artisan list</code></pre>
								</li>
							</li>
							<li class="fragment">
								Help on a specific command
								<pre class="bigger"><code class="language-bash dontrun" style="max-height: 380px; overflow: scroll;">$ php artisan help serve</code></pre>
								</li>
							</li>
							<li class="fragment">
								Host project on PHP 5.4+'s built-in development server
								<pre class="bigger"><code class="language-bash dontrun" style="max-height: 380px; overflow: scroll;">$ php artisan serve --port=8080</code></pre>
								</li>
							</li>
							<li class="fragment">
								You can <a href="https://laravel.com/docs/master/artisan">extend Artisan with your own commands</a>
							</li>
							
							
						</ul>
						<footer class="fragment"><em>Driven by Symfony Console</em></footer>
					</section>
					
					<section>
						<h2>Need help?!</h2>
						<ul>
							<li class="fragment">
								Docs: <a href="https://laravel.com/docs/5.2/">https://laravel.com/docs/5.2/</a>
							</li>
							<li class="fragment">
								API: <a href="https://laravel.com/api/5.2/">https://laravel.com/api/5.2/</a>
							</li>
							
							<li class="fragment">
								Replace the version number by <code>master</code> in the URLs for the most recent Laravel version
							</li>
							<li class="fragment">
								Don't use the docs of Laravel versions < 5.0. A lot has changed.
							</li>
							
						</ul>
					</section>
				</section>


				<!-- Configuration -->
				<section>
					<section>
						<h2>Configuration</h2>
						<p><img src="assets/04b/KCEX_COMICON.jpg" alt="" title="" width="547" /></p>
					</section>					

					<section>
						<h2>Next step: configuration (1)</h2>
						<ul>
							<li class="fragment">
								Directory permissions
								<ul>
									<li class="fragment"><code>storage/</code> and <code>bootstrap/cache</code> writable by web server (associated account)</li>
								</ul>
							</li>
							<li class="fragment">
								Application key (= IMPORTANT)
								<ul>
									<li class="fragment">a random and secret key, used for session security and encryption</li>
									<li class="fragment">location: <code>.env</code> environment file</li>
									<li class="fragment">assigned for you by the Composer/Laravel installer (not when you copied the project or alike)</li>
									<li class="fragment">if necessary, generate with
									<pre class="bigger"><code class="language-bash dontrun" style="max-height: 380px; overflow: scroll;">$ php artisan key:generate</code></pre></li>
								</ul>
							</li>							
						</ul>
					</section>
					
					<section>
						<h2>Next step: configuration (2)</h2>
						<ul>
							<li class="fragment">
								Additional configuration
								<ul>
									<li class="fragment">
										<code>config/app.php</code> &mdash; Main settings, locale, timezone, automatically loaded service providers, &hellip;
									</li>
									<li class="fragment">
										<code>config/database.php</code> &mdash; Database connection configurations
									</li>
									<li class="fragment">
										10 other config files e.g. <code>config/cache.php</code>, <code>config/session.php</code>, &hellip;
									</li>
									<li class="fragment">
										format: one big (nested) array of key-value pairs of settings e.g. <pre class="bigger"><code class="language-php">'charset' => 'utf8mb4',</code></pre>
									</li>
								</ul>
							</li>					
						</ul>
					</section>
					
					<section>
						<h2>CAUTION: the <a href="https://laravel.com/docs/master/helpers#method-env">env()</a> function</h2>
						<ul>
							<li class="fragment">
								Including environment variables in the <code>config/*.php</code> files
								<ul>
									<li class="fragment">
										the <a href="https://laravel.com/docs/master/helpers#method-env">env()</a> function gets the value of an environment variable or returns a default value
										<ul>
											<li class="fragment">
												Example without default value from <code>config/app.php</code>: <pre class="bigger"><code class="language-php">'key' => env('APP_KEY'),</code></pre>
											</li>
											<li class="fragment">
												Example with default value from <code>config/database.php</code>: <pre class="bigger"><code class="language-php">'password' => env('DB_PASSWORD', 'Azerty123'),</code></pre>
											</li>
										</ul>
									</li>
									<li class="fragment">
										Environment variables must/can be set in the <code>.env</code> file e.g. <pre class="bigger"><code>APP_KEY=base64:DBHbcyBbq0pBarhWVn0S8bYMqt9IV9EhXhthcyeioKw=
DB_PASSWORD=secret</code></pre>
									</li>
									<li class="fragment">This is the mechanism behind the <a href="https://laravel.com/docs/5.2/configuration#environment-configuration">Environment Configuration</a></li>
								</ul>
							</li>							
						</ul>
					</section>

					<section>
						<h2>The Environment Configuration</h2>
						<ul>
							<li class="fragment">
								Principles
								<ul>
									<li><strong>Idea:</strong> local/dev and production configurations may be different such as personal keys, Facebook Dev Credentials, e-mail component.</li>
									<li><strong>Mechanism:</strong> the <code>.env</code> file must/can be used to override settings in the <em>real config files</em><br/></li>
								</ul>
							</li>
							<li class="fragment">
								How to use
								<ul>
									<li>Put your production configuration in <code>config/*.php</code></li>
									<li>Override parts of it with local settings in <code>.env</code></li>
									<li>Keep <code>.env</code> out of version control (git &rarr; <code>.gitignore</code>). It's private. <br/> </li>
								</ul>
							</li>							
						</ul>
						<footer class="fragment"><em>Note: the application key is always in <code>.env</code></em><br><em>Note: alternative local configurations like <code>.env.testing</code> can be used by PHPUnit</em></footer>
					</section>
					
					<section>
						<h2>Example: database config (1) </h2>
						<small><code>config/database.php</code></small>
						<pre class="bigger"><code class="language-php">&lt;?php
						
return [
    &hellip;
    'default' => env('DB_CONNECTION', 'mysql'),

    'connections' => [
        'sqlite' => [
            &hellip;
        ],

        'mysql' => [
            'driver' => 'mysql',
            'host' => env('DB_HOST', 'db009.my-hosting-company.be'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'events'),
            'username' => env('DB_USERNAME', 'production'),
            'password' => env('DB_PASSWORD', 'Azerty123'),
            'charset' => 'utf8mb4',
			&hellip;</code></pre>
					</section>
					<section>
						<h2>Example: database config (2) </h2>
						<small><code>.env</code></small>
						<pre class="bigger"><code>APP_ENV=local
APP_DEBUG=true
APP_KEY=base64:DBHbcyBbq0pBarhWVn0S8bYMqt9IV9EhXhthcyeioKw=
APP_URL=http://localhost

DB_CONNECTION=sqlite</code></pre>
						<ul>
							<li class="fragment">
								You can ...
								<ul>
									<li>also override parts of the connection config (e.g. just the encoding or password)</li>
									<li>abandon the <code>DB_CONNECTION=sqlite</code> if you agree with the default connection in <code>config/database.php</code> </li>
								</ul>
							</li>
							<li class="fragment">
								but you cannot delete <code>.env</code>
							</li>							
						</ul>
					</section>

				</section>


				<!-- Laravel Routing -->
				<section>
					<section>
						<h2>Laravel Routing</h2>
						<p><img src="assets/04b/idees_noires.jpg" alt="" title="" width="500" /></p>
					</section>

					<section>
						<h2>Routing</h2>
						<ul>
							<li class="fragment">
								All Laravel routes are defined in <code>app/Http/routes.php</code>
							</li>
							<li class="fragment">
								<a href="https://laravel.com/docs/5.2/routing#basic-routing">Router methods</a> very similar to Silex routing
							</li>
							<li class="fragment" style="margin-top: 1em">
								Router method available for any HTTP verb (get, post, put, ...)
								<pre class="bigger"><code class="language-php">Route::get('foo', function () {
    return 'Hello World';
});</code></pre>
							</li>
							<li class="fragment" style="margin-top: 1em">
								HTTP verb combinations
								<pre class="bigger"><code class="language-php">Route::match(['get', 'post'], '/', function () { &hellip;
								
Route::any('foo', function () { &hellip;</code></pre>
							</li>
						</ul>
					</section>


					<section>
						<h2>Dynamic Routing</h2>
						<ul>
							<li class="fragment">
								Working with <a href="https://laravel.com/docs/5.2/routing#route-parameters">Route 
								parameters</a>
								<ul>
									<li class="fragment">The parameters will be passed into your route's Closure</li>
								</ul>
								<pre class="bigger fragment"><code class="language-php">Route::get('posts/{post}/comments/{comment}', function ($postId, $commentId) {
    return 'Post ' . $postId;
});</code></pre>
							</li>
							<li class="fragment">
								Optional parameters</a>
								<pre class="bigger fragment"><code class="language-php">Route::get('user/{name?}', function ($name = 'John') {
    return $name;
});</code></pre>
							</li>
						</ul>
						<footer class="fragment"><em>Important: in these examples we do not prevent XSS</em></footer>
					</section>

					<section>
						<h2>Regex constraints</h2>
						<ul>
							<li class="fragment">
								Constrain parameters using the <code>where</code> method
								<pre class="bigger fragment"><code class="language-php">Route::get('user/{id}/{name}', function ($id, $name) {
    //
})
->where(['id' => '[0-9]+', 'name' => '[a-zA-Z]+']);</code></pre>
							</li>
							<li class="fragment">You can add <a href="https://laravel.com/docs/5.2/routing#parameters-regular-expression-constraints">global constraints</a> too
							<ul>
								<li class="fragment">For example: for each <em>id</em> parameter in a dynamic route</li>
									<li class="fragment">Location: boot method of your RouteServiceProvider (typically <code>app/Providers/RouteServiceProvider.php</code>)</li>
							</ul>
							</li>
						</ul>

					</section>


					<section>
						<h2>The HTTP Request</h2>

						<ul>
							<li class="fragment">
								The <a href="https://laravel.com/docs/master/requests">HTTP Request</a>
								<ul>
									<li class="fragment">is an instance of <code>Illuminate\Http\Request</code></li>
									<li class="fragment">is typically obtained in your code by type hinting:
									<pre class="bigger fragment"><code class="language-php">use Illuminate\Http\Request;
									
Route::post('register', function(Request $request) {
	$email = $request->input('email', 'not provided');
	$name = $request->cookie('name');
	$iKnowItsTrue = $request->isMethod('post');
    &hellip;
});</code></pre>
									</li>
									<li class="fragment">Want more? <a href="https://laravel.com/api/master/Illuminate/Http/Request.html">Request API</a></li>
								</ul>
							</li>
						</ul>
					</section>


				</section>


				<!-- Views and templates -->
				<section>
					<section>
						<h2>Views and templates</h2>
					</section>

				</section>

				<!-- 4 Database features -->
				<section>
					<section>
						<h2>4 Database features</h2>
					</section>

				</section>				
				
				<!-- The END -->
				<section>
					<section>
						<h2>Questions?</h2>
						<footer>
							<em><a href="http://www.ikdoeict.be/">ikdoeict.be</a> &mdash; <a href="mailto:joris.maervoet@odisee.be">joris.maervoet@odisee.be</a></em>
						</footer>
					</section>
				</section>



				<!-- Sources -->
				<section id="sources">
					<section>
						<h2>Sources</h2>
						
						
						<ul> 
							<li><a href="https://laravel.com/docs/5.2/installation">Laravel docs: installation</a></li>
							<li><a href="https://scotch.io/tutorials/understanding-laravel-environment-variables">Tutorial on environment config</a></li>
							<li><a href=""></a></li>
							<li><a href=""></a></li>							
						</ul>
					</section>
				</section>

			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
				<span id="revealIndex">/</span>
			</aside>

			<!-- Index Link -->
			<aside class="back">
				<a href="index.html">&larr; Back to index</a>
			</aside>

			<!-- ikdoeict.be Link -->
			<a href="http://www.ikdoeict.be/" title="ikdoeict.be" id="ikdoeict">ikdoeict.be</a>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<script src="js/reveal.js"></script>
		<script src="lib/highlight.js"></script>
		<script src="lib/prefixfree.js"></script>
		<script src="lib/css-snippets.js"></script>
		<script src="lib/css-edit.js"></script>
		<script src="lib/incrementable.js"></script>
		<script src="js/main.js"></script>

	</body>
</html>