<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Web Development &mdash; Serverside Development</title>

		<link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css" media="screen">
		<link rel="stylesheet" href="css/print.css" media="print">

		<link rel="stylesheet" href="lib/zenburn.css">
		<style>
			html, body {
				background: #34afbd;
				background: -moz-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#34afbd), color-stop(100%,#1c1e20));
				background: -webkit-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -o-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: -ms-radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				background: radial-gradient(center, ellipse cover, #34afbd 0%,#1c1e20 100%);
				letter-spacing: 0em;
			}

			#reveal nav {
				opacity: 0.3;
				letter-spacing: -0.02em;
			}
		</style>
	</head>

	<body>

		<div id="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">


				<!-- Title -->
				<section>
					<section>
						<h3 class="inverted">Serverside Development <small>[JLW506]</small></h3>
						<h1>03.url design</h1>

						<footer>
							<em>Course materials: <a href="http://www.bram.us/">Bram(us) Van Damme</a> &mdash; Lecturer: <a href="mailto:joris.maervoet@odisee.be">Joris Maervoet</a></em>
						</footer>
						<script>
							// Delicously hacky. Look away.
							if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) )
							document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
						</script>
					</section>
				</section>


				<!-- URL Design -->
				<section>
					<section>
						<h2>URL Design</h2>

						<p><img src="assets/03/futurama_bendersroom.jpg" alt="" title="" width="447" height="334"></p>
						<q>Not enough room? My place is 2 cubic meters and we only take up 1.5 cubic meters. We've got room for a whole nother 2/3rds of a person.</q>
					</section>

					<section>
						<h2>URLs in the olden days</h2>

						<ul>
							<li class="fragment">
								In the beginning
								<ul>
									<li><code>http://example.org/index.php?action=zomg&amp;page=lol</code></li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Then SEO and &ldquo;<em>nice urls</em>&rdquo; came along
								<ul>
									<li class="fragment"><code>http://example.org/zomg/lol</code></li>
									<li class="fragment"><code>http://example.org/videos/latest/hamburgers</code></li>
									<li class="fragment"><code>http://example.org/search/lolcats/pictures/yes/1/200</code></li>
								</ul>
							</li>
						</ul>
						<p class="fragment" style="position: absolute; top: 15%; left: 10%; right: 10%; bottom: 10%; transform: rotate(-8deg);z-index:-1;"><img src="assets/03/picard-facepalm.jpg" style="width: 500px;" /></p>
						<p class="fragment" style="position: absolute; top: 15%; left: 5%; right: 10%; bottom: 10%; transform: rotate(-5deg);z-index:-1;"><img src="assets/03/picard-double-facepalm.jpg" style="width: 500px;" /></p>
					</section>

					<section>
						<h2>Why URL design?</h2>
						<ul>
							<li class="fragment">SEO (Search Engine Optimization)
							</li>
							<li class="fragment" style="margin-top: 1em">Usability
								<ul>
									<li class="fragment">Users interact with URLs</li>
									<li class="fragment">A good URL is clear, concise and understandable</li>
									<li class="fragment">A good URL is <em>hackable</em></li>
								</ul>
							</li>
						</ul>
					</section>
					
					<section>
						<h2>Constistency and Simplicity</h2>
						<ul>
							<li class="fragment">
								Many URL design systems and conventions exists
								<ul>
									<li class="fragment">They are optimized for different goals</li>
									<li class="fragment">There is a lot of debate on them</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								The most important guidelines:
								<ul>
									<li class="fragment">Be <strong>consistent</strong>: don't mix up systems</li>
									<li class="fragment">Keep it <strong>simple</strong>: don't make long and complex URLs</li>
								</ul>
							</li>
						</ul>
					</section>

					<section>
						<h2 style="font-size:200%">Rule #1: Identification &amp; Hierarchy (1)</h2>
						<ul>
							<li class="fragment">
								Basic naming conventions
								<ul>
									<li class="fragment">Verbs are bad, nouns are good</li>
									<li class="fragment">You decide: use plurals <strong>everywhere</strong> or singulars <strong>everywhere</strong></li>
									<li class="fragment">Respect the Hierarchy</li>
									<li class="fragment">This does not apply to <em>&ldquo;normal pages&rdquo;</em></li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 0.7em">
								Examples
								<ul>
									<li class="fragment"><ins><code>/products</code></ins></li>
									<li class="fragment"><del><code>/product/1234</code></del> &rarr; <ins><code>/products/1234</code></ins></li>
									<li class="fragment"><del><code>/photos/product/1234</code></del> &rarr; <ins><code>/products/1234/photos</code></ins></li>
									<li class="fragment"><del><code>/photos/product/1234/5678</code></del> &rarr; <ins><code>/products/1234/photos/5678</code></ins></li>
									<li class="fragment"><del><code>/pages/85/contact</code></del> &rarr; <ins><code>/contact</code></ins></li>
								</ul>
							</li>
						</ul>

					</section>

					<section>
						<h2 style="font-size:200%">Rule #1: Identification &amp; Hierarchy (2)</h2>
						<ul>
							<li class="fragment">
								Use concrete naming, yet don't be too specific
								<ul>
									<li class="fragment"><del><code>/things</code></del></li>
									<li class="fragment"><del><code>/animals</code></del></li>
									<li class="fragment"><code class="ok">/dogs</code></li>
									<li class="fragment"><del><code>/beagles</code></del></li>
								</ul>
							</li>
						</ul>
					</section>

					<section>
						<h2>Example</h2>

						<ul>
							<li><code>/</code></li>
							<li><code>/movies</code></li>
							<li><code>/movies/<em>{id}</em></code></li>
							<li><code>/movies/<em>{id}</em>/photos</code></li>
							<li><code>/actors</code></li>
							<li><code>/actors/<em>{id}</em></code></li>
							<li><code>/actors/<em>{id}</em>/movies</code></li>
							<li><code>/about</code></li>
							<li><code>/contact</code></li>
						</ul>
					</section>
					
					<section>
						<h2>Rule #2: Namespace prefix</h2>
						<ul style="font-size: 90%;">
							<li class="fragment">
								Consider a namespace prefix only
								<ul>
									<li class="fragment">in order to indicate a separate section on your website, which is not the <em>main</em> section (in the future)</li>
									<li class="fragment">or to avoid (future) URL conflicts</li>
									<li class="fragment">for account settings (don't start with the user)</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 0.7em">
								Examples
								<ul>
									<li class="fragment"><ins><code>/blog</code></ins></li>
									<li class="fragment"><ins><code>/blog/posts/25</code></ins></li>
									<li class="fragment">On a web store: <del><code>/shop/products/1234</code></del> &rarr; <ins><code>/products/1234</code></ins></li>
									<li class="fragment">On a web store: <del><code>/categories/25/edit</code></del> &rarr; <ins><code>/admin/categories/25/edit</code></ins></li>
									<li class="fragment"><del><code>/users/66/account/address</code></del> &rarr; <ins><code>/account/address</code></ins></li>
								</ul>
							</li>
						</ul>
						<footer class="fragment">Note: a username can be a namespace to but you'll need a blacklist</footer>
					</section>
					
					<section>
						<h2>Rule #3: Forms with verbs (1)</h2>
						<ul>
							<li class="fragment">
								Don't be confused
								<ul>
									<li class="fragment">A lot of URL specifications are on <strong>RESTful Web APIs</strong>
										<ul>
											<li class="fragment">They avoid verbs in the URL</li>
											<li class="fragment">They're using <strong>HTTP verbs/methods</strong> (<code>GET</code>, <code>PUT</code>, <code>DELETE</code>, &hellip;) to indicate the type of action</li>
										</ul>
									</li>
									<li class="fragment">The current rule is on <strong>action related to forms</strong>
										<ul>
											<li class="fragment">Showing the form (<code>GET</code>)</li>
											<li class="fragment">Processing the action (<code>POST</code>)</li>
											<li class="fragment">No other <strong>HTTP methods</strong> allowed </li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</section>
					<section>
						<h2>Rule #3: Forms with verbs (2)</h2>
						<ul style="font-size: 85%;">
							<li class="fragment">
								Define a set of verbs for Create, Update and Delete actions of forms
								<ul>
									<li class="fragment">Attach the verb at the end of the URL
									</li>
									<li class="fragment">
										Respect your HTTP method: <code>GET</code> shows the form; <code>POST</code> processes the action 
									</li>
									<li class="fragment">
										Stick to your choice: use the same verbs and system everywhere!
									</li>									
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Examples
								<ul style="font-size: 75%;">
									<li><code>GET&nbsp;&nbsp;/admin/products</code></li>
									<li><code>GET&nbsp;&nbsp;/admin/products/create</code></li>
									<li><code>POST /admin/products/create</code></li>
									<li><code>GET&nbsp;&nbsp;/admin/products/<em>{id}</em>/edit</code></li>
									<li><code>POST /admin/products/<em>{id}</em>/edit</code></li>
									<li><code>GET&nbsp;&nbsp;/admin/products/<em>{id}</em>/delete</code></li>
									<li><code>POST /admin/products/<em>{id}</em>/delete</code></li>									
								</ul>
							</li>
						</ul>
					</section>
					
					<section>
						<h2>Note #1: Slug</h2>
						<ul>
							<li class="fragment">
								Sometimes a <a href="https://en.wikipedia.org/wiki/Clean_URL#Slug">slug</a> is attached to the end of the URL
								<ul>
									<li class="fragment">
										Slug = name of the resource in the form of human-readable keywords
									</li>
									<li class="fragment">
										Example: <code>/products/1234/huawei-p10-lite-black</code></strong>
									</li>
									<li class="fragment">
										SEO: keep it short and use hyphens (<code>-</code>), no underscores (<code>_</code>)
									</li>
									<li class="fragment">
										Incorrect slug? Redirect!
									</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Do we need IDs in URLs at all then?
								<ul>
									<li class="fragment">
										It depends &#8482;
									</li>
									<li class="fragment">
										No IDs is more SEO-friendly, but you need a performant <em>slug index</em> and URLs become invalid when the resource title changes
									</li>
								</ul>
							</li>
						</ul>
					</section>
					
					<section>
						<h2>Note #2: duplicate URLs</h2>

						<ul>
							<li class="fragment" style="margin-top: 1em">
								Example
								<ul style="font-size: 75%;">
									<li><code>/products/1234</code></li>
									<li><code>/categories/15/products/1234</code></li>
									<li><code>/brands/9/products/1234</code></li>						
								</ul>
							</li>
							<li class="fragment">
								We call these <em>canonical</em> URLs
								<ul>
									<li class="fragment">
										It means that the pages are about the same resource but might not be exact copies (e.g. think of the breadcrumb)
									</li>
									<li class="fragment">
										You need to <a href="https://moz.com/blog/canonical-url-tag-the-most-important-advancement-in-seo-practices-since-sitemaps">hint</a> search engines about canonical URLs
									</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em">
								Advise (not obligatory)
								<ul>
									<li class="fragment">
										Avoid canonical paths and keep URLs short and simple
									</li>
									<li class="fragment">
										Don't confuse URLs with breadcrumbs
									</li>
									<li class="fragment">
										Strip the URL hierarchy to its essence
									</li>
								</ul>
							</li>
						</ul>
					</section>					
					
				</section>


				<!-- Supporting Clean URLs -->
				<section>
					<section>
						<h2>Supporting Clean URLs</h2>

						<p><img src="assets/03/futurama-buttfailure.png" alt="" title="" width="447" /></p>
						<q>I installed shock absorbing bumpers on your ass to minimize the chance of catastrofic butt failure.</q>
					</section>

					<section>
						<h2>Supporting Clean URLs</h2>
						<ol>
							<li class="fragment">
								Let all requests to inexistent files/folders be processed by <code>index.php</code>
							</li>
							<li class="fragment" style="margin-top: 1em;">
								Build <code>index.php</code> in such a way so that it loads the requested content based upon the URL
							</li>
						</ol>
					</section>

					<section>
						<h2>1. Howto: Apache</h2>
						<ul>
							<li class="fragment">
								Possible using the <code>mod_rewrite</code> Apache Module
								<ul>
									<li>Wampserver: not enabled by default (<a href="assets/03/wamp_url_rewrite.png">instructions</a>)</li>
									<li>MAMP Pro: enabled by default</li>
								</ul>
							</li>
							<li class="fragment">
								Put a file named <code>.htaccess</code> in your root to <em>rewrite</em> requests to non-existing files to <code>index.php</code>
								<pre class="bigger"><code>&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [L]
&lt;/IfModule&gt;</code></pre>
							</li>
							<li>Better: include the rewrite rules in your <a href="https://stackoverflow.com/questions/10175513/mod-rewrite-in-vhosts-configuration">virtual hosts</a> config</li>
						</ul>
					</section>

					<!--section>
						<h2>1. Howto: IIS</h2>
						<ul>
							<li class="fragment">
								Possible using the <a href="http://www.iis.net/downloads/microsoft/url-rewrite">IIS Rewrite Module</a>
							</li>
							<li class="fragment">
								Put a file named <code>web.config</code> in your root to redirect requests to non-existing files to <code>index.php</code>
								<pre class="bigger"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
	&lt;system.webServer&gt;
		&lt;rewrite&gt;
			&lt;rules&gt;
				&lt;rule name=&quot;Main Rule&quot; stopProcessing=&quot;true&quot;&gt;
					&lt;match url=&quot;.*&quot; /&gt;
					&lt;conditions logicalGrouping=&quot;MatchAll&quot;&gt;
						&lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;
						&lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsDirectory&quot; negate=&quot;true&quot; /&gt;
					&lt;/conditions&gt;
					&lt;action type=&quot;Rewrite&quot; url=&quot;index.php&quot; /&gt;
				&lt;/rule&gt;
			&lt;/rules&gt;
		&lt;/rewrite&gt;
	&lt;/system.webServer&gt;
&lt;/configuration&gt;</code></pre>
							</li>
						</ul>
					</section-->

					<section>
						<h2>1. Howto: Built-in PHP server</h2>
						<ul>
							<li class="fragment">
								<strong>All</strong> requests route to <code>index.php</code> by default
								<ul>
									<li class="fragment">You'll need to add some extra PHP code to <code>index.php</code> to force non-404 requests route to the correct file
									</li>
								</ul>
								<div class="fragment"><pre class="bigger"><code>&lt;?php

$filename = __DIR__ . preg_replace('#(\?.*)$#', '', $_SERVER['REQUEST_URI']);
if (php_sapi_name() === 'cli-server' &amp;&amp; is_file($filename)) {
	return false;
}

// rest of your code here</code></pre></div>
							</li>
						</ul>
						<footer class="fragment"><em>Note: You can start a server by running <code>php -S localhost:8080</code> in your project www-root</em></footer>
					</section>


					<section>
						<h2>2. Howto</h2>

						<ul>
							<li class="fragment">
								Write something yourself.
								<ul>
									<li class="fragment">Use the value in <code>$_SERVER['REQUEST_URI']</code> to get started</li>
								</ul>
							</li>
							<li class="fragment" style="margin-top: 1em;">
								Install a <em>router</em> library that does this for you.
								<ul class="fragment">
									<li><a href="https://github.com/chriso/klein.php">Klein</a></li>
									<li><a href="https://github.com/radiosilence/Ham">HAM</a></li>
									<li><a href="https://github.com/bramus/router">bramus/router</a></li>
									<li>The router that ships with the framework you're using</li>
								</ul>
							</li>
						</ul>
					</section>


					<section>
						<h2>2. Example</h2>

						<pre class="bigger"><code class="language-php">&lt;?php

require __DIR__ . '/vendor/autoload.php';

$router = new \Bramus\Router\Router();

$router-&gt;get('/', function() {
	echo 'index';
});

$router-&gt;get('/hello', function() {
	echo 'hello';
});

$router-&gt;get('/hello/(\w+)', function($name) {
	echo 'hello ' . htmlentities($name);
});

$router->run();</code></pre>
					</section>

					<section>
						<h2>Linking your assets (1)</h2>
						<ul>
							<li class="fragment">
								Web assets
								<ul>
									<li class="fragment">
										Images, stylesheets, &hellip; of your website
									</li>
									<li class="fragment">
										Files consulted <strong>directly</strong> from the web server (not passing <code>index.php</code>)
									</li>
								</ul>
							</li>
							<li class="fragment">
								Suppose <code>https://myshop.be/brands/7/products/9</code> generates the following HTML code
								&rarr; Problem
								<pre class="bigger"><code class="language-html dontrun">&lt;!DOCTYPE html&gt;
&lt;html lang="nl"&gt;
&lt;head&gt;
	&lt;title&gt;MyShop - Drilboor&lt;/title&gt;
	&lt;meta charset="utf-8" /&gt;
	&lt;link rel="stylesheet" href="css/start.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
	&hellip; &lt;a href="contact"&gt;Contacteer ons&lt;/a&gt;
	&hellip; &lt;img src="img/product9.jpg" alt="Productfoto drilboor"/&gt;
&lt;/body&gt;
&lt;/html&gt;								</code></pre>
							</li>
						</ul>
					</section>

					<section>
						<h2>Linking your assets (2)</h2>
						<ul>
							<li class="fragment">
								Possible solutions
								<ul>
									<li class="fragment">
										Best: write a PHP function that generates the correct <strong>relative</strong> (like <code>../css</code>) paths for you
										<ul>
											<li class="fragment">
												In some frameworks this function is available (sometimes generating <strong>absolute</strong> URLs)
											</li>
										</ul>
									</li>
									<li class="fragment">
										Just start any relative path with <code>/</code> (like <code>/css</code>) = the home slash
										<ul>
											<li class="fragment">
												Disadvantage: your code is home path specific (e.g. <code>myshop.be/admin/</code>) on many places
											</li>
										</ul>
									</li>
									<li class="fragment">
										Add <code>&lt;base href="https://myshop.be/"&gt;</code> to your HTML head
										<ul>
											<li class="fragment">
												Disadvantage: your code is URL specific on a few places
											</li>
											<li class="fragment">
												Disadvantage: side-effects with <code>#</code> and <code>?</code> paths and with SEO and JavaScript
											</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</section>

				</section>

				<!-- The END -->
				<section>
					<section>
						<h2>Questions?</h2>
						<footer>
							<em><a href="http://www.ikdoeict.be/">ikdoeict.be</a> &mdash; <a href="mailto:joris.maervoet@odisee.be">joris.maervoet@odisee.be</a></em>
						</footer>
					</section>
				</section>



				<!-- Sources -->
				<section id="sources">
					<section>
						<h2>Sources</h2>
						<ul>
							<li><a href="http://martinfowler.com/articles/richardsonMaturityModel.html">http://martinfowler.com/articles/richardsonMaturityModel.html</a></li>
							<li><a href="https://www.creativebloq.com/design/design-perfect-url-1126509">https://www.creativebloq.com/design/design-perfect-url-1126509</a></li>

						</ul>
					</section>
				</section>

			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
				<span id="revealIndex">/</span>
			</aside>

			<!-- Index Link -->
			<aside class="back">
				<a href="index.html">&larr; Back to index</a>
			</aside>

			<!-- ikdoeict.be Link -->
			<a href="http://www.ikdoeict.be/" title="ikdoeict.be" id="ikdoeict">ikdoeict.be</a>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<script src="js/reveal.js"></script>
		<script src="lib/highlight.js"></script>
		<script src="lib/prefixfree.js"></script>
		<script src="lib/css-snippets.js"></script>
		<script src="lib/css-edit.js"></script>
		<script src="lib/incrementable.js"></script>
		<script src="js/main.js"></script>

	</body>
</html>